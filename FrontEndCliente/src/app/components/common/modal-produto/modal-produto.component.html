<ion-modal backdropDismiss="false" [isOpen]="this.isOpen">
  <ng-template>
    <ion-content>
      <div class="wrapper">
        <ng-container *ngIf="!this.loading">
          <ion-row class="ion-justify-content-between ion-align-items-center">
            <ion-col size="8" class="itens-borda-superior">
              <ion-label class="ion-padding">
                <h2 class="titulo ion-text-capitalize">{{ this.produto.nome }}</h2>
              </ion-label>
            </ion-col>
            <ion-col size="1" class="itens-borda-superior">
              <ion-button (click)="this.fechar.emit()" fill="clear">
                <ion-icon name="close-outline" size="large"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
    
          <ion-row class="ion-justify-content-center">
            <ion-col size-lg="10" size="">
              <ion-row>
                <ion-col class="imagem-container ion-justify-content-center">
                  <ion-img class="imagem" src="{{ this.produto.imagem ||  '../../../../assets/imgs/home-icons/garfo_faca_outline.png'}}"></ion-img>
                </ion-col>
              </ion-row>
              <ion-row>
              </ion-row>
    
              <ion-col class="detalhes">
                <ion-row>
                  <ion-col>
                    <ion-label>
                      <p class="subtitulo">Detalhes: </p>
                    </ion-label>
                  </ion-col>
                </ion-row>
                <ion-row class="informacoes">
                  <ion-col>
                    <ion-row class="ion-justify-content-start">
                      <ion-title class="subtitulo">
                        Informações do Produto:
                      </ion-title>
                    </ion-row>
                    <ion-accordion-group multiple="true">
                      <ion-accordion value="{{ this.produto.descricao }}">
                        <ion-item slot="header" color="light">
                          <ion-label>Descrição</ion-label>
                        </ion-item>
                        <div class="ion-padding" slot="content">{{ this.produto.descricao }}</div>
                      </ion-accordion>
                    </ion-accordion-group>
    
                    <ion-title *ngIf="this.variacoesSelecionadas.length" class="subtitulo">
                      Informações do Produto:
                    </ion-title>
                    <ion-accordion-group multiple="true">
                      <ng-container *ngFor="let variacao of this.variacoesSelecionadas">
                        <ion-accordion value="{{ variacao.variacao.nome }}">
                          <ion-item slot="header" color="light">
                            <ion-label>{{ variacao.grupo_variacao.tipo }}</ion-label>
                          </ion-item>
                          <div class="ion-padding" slot="content">
                            <p>{{ variacao.variacao.nome }}</p>
                            <p>Valor: R${{ variacao.valor || '0,00' }}</p>
                          </div>
                        </ion-accordion>
                      </ng-container>
    
                    </ion-accordion-group>
                  </ion-col>
                </ion-row>
    
                <ion-row>
                  <ion-col>
                    <ng-container *ngFor="let grupoVariacao of this.produto.grupo_variacao">
                      <ion-title class="ion-text-capitalize titulo-radio-group">{{ grupoVariacao.tipo }}</ion-title>
                      <ion-radio-group (ionChange)="alterarVariacoesSelecionadas($event, grupoVariacao)">
                        <ng-container *ngFor="let variacao of grupoVariacao.variacao">
                          <ion-item>
                            <ion-label>{{ variacao.nome }}</ion-label>
                            <ion-radio slot="end" value="{{ stringify(variacao) }}"></ion-radio>
                          </ion-item>
                        </ng-container>
                      </ion-radio-group>
                    </ng-container>
    
                  </ion-col>
                </ion-row>
              </ion-col>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <app-observacoes></app-observacoes>
            </ion-col>
          </ion-row>
    
          <ion-row>
            <ion-col>
                <p class="ion-text-bold">Valor total: R${{ this.precoTotal || '0,00' }}</p>
            </ion-col>
          </ion-row>
  
          <ion-row class="ion-justify-content-around">
            <ion-col size="auto">
              <app-contador [min]="1"></app-contador>
            </ion-col>
            <ion-col size="auto">
              <ion-button mode="ios">Adicionar</ion-button>
            </ion-col>
          </ion-row>
        </ng-container>
       <app-loading [loading]="this.loading"></app-loading>
      </div>
    </ion-content>
  </ng-template>
</ion-modal>
